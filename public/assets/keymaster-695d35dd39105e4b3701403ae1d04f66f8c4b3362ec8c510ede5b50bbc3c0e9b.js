!function(e){function n(e,n){for(var t=e.length;t--;)if(e[t]===n)return t;return-1}function t(e){for(y in k)k[y]=e[b[y]]}function o(e,o){var r,i,c,f,a;if(r=e.keyCode,-1==n(C,r)&&C.push(r),(93==r||224==r)&&(r=91),r in k){k[r]=!0;for(c in m)m[c]==r&&(l[c]=!0)}else if(t(e),l.filter.call(this,e)&&r in g)for(f=0;f<g[r].length;f++)if(i=g[r][f],i.scope==o||"all"==i.scope){a=i.mods.length>0;for(c in k)(!k[c]&&n(i.mods,+c)>-1||k[c]&&-1==n(i.mods,+c))&&(a=!1);(0!=i.mods.length||k[16]||k[18]||k[17]||k[91])&&!a||i.method(e,i)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function r(e){var t,o=e.keyCode,r=n(C,o);if(r>=0&&C.splice(r,1),(93==o||224==o)&&(o=91),o in k){k[o]=!1;for(t in m)m[t]==o&&(l[t]=!1)}}function i(){for(y in k)k[y]=!1;for(y in m)l[y]=!1}function l(e,n,t){var o,r,i,l;for(void 0===t&&(t=n,n="all"),e=e.replace(/\s/g,""),o=e.split(","),""==o[o.length-1]&&(o[o.length-2]+=","),i=0;i<o.length;i++){if(r=[],e=o[i].split("+"),e.length>1){for(r=e.slice(0,e.length-1),l=0;l<r.length;l++)r[l]=m[r[l]];e=[e[e.length-1]]}e=e[0],e=w(e),e in g||(g[e]=[]),g[e].push({shortcut:o[i],scope:n,method:t,key:o[i],mods:r})}}function c(e){return"string"==typeof e&&(e=w(e)),-1!=n(C,e)}function f(){return C.slice(0)}function a(e){var n=(e.target||e.srcElement).tagName;return!("INPUT"==n||"SELECT"==n||"TEXTAREA"==n)}function u(e){v=e||"all"}function s(){return v||"all"}function d(e){var n,t,o;for(n in g)for(t=g[n],o=0;o<t.length;)t[o].scope===e?t.splice(o,1):o++}function p(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent&&e.attachEvent("on"+n,function(){t(window.event)})}function h(){var n=e.key;return e.key=K,n}var y,g={},k={16:!1,18:!1,17:!1,91:!1},v="all",m={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},E={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},w=function(e){return E[e]||e.toUpperCase().charCodeAt(0)},C=[];for(y=1;20>y;y++)m["f"+y]=111+y;var b={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(y in m)l[y]=!1;p(document,"keydown",function(e){o(e,v)}),p(document,"keyup",r),p(window,"focus",i);var K=e.key;e.key=l,e.key.setScope=u,e.key.getScope=s,e.key.deleteScope=d,e.key.filter=a,e.key.isPressed=c,e.key.getPressedKeyCodes=f,e.key.noConflict=h,"undefined"!=typeof module&&(module.exports=key)}(this);